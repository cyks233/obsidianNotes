#数据库 
### 函数依赖

#### 定义
关系R上的函数依赖(FD),是指“如果R的两个元组在属性$A_{1},A_{2},...,A_{n}$上一致（即它们对应这些属性的分量值都相等）”，那么它们在属性$B_{1},B_{2},...,B_{m}$上也一致。

如果确定关系R的每个实例都能使一个给定的FD为真，那么R满足函数依赖$f $


#### 关系的键
1. 这些属性函数决定关系的所有其他属性（函数决定符号：$\rightarrow$）
2. 在{$A_{1},A_{2},...,A_{n}$}的真子集中，没有一个能函数决定R的所有其他属性。（键必须是最小的）


#### 超键
一个包含键的属性集叫作**超键**。（键的超集）
每一个超键都满足键的第一个条件：它函数决定了关系中的其他属性。
超键不需要满足键的第二个条件，即最小化
键包含在超键里
最小化的键，称为**候选键**，是关系模式中可能成为主键的键。


### 函数依赖的规则

#### 函数依赖的推导
关系$R(A,B,C)$满足FD：$A\rightarrow B$和$B\rightarrow C$可以推断出$A\rightarrow C$。
在不改变关系合法实例集合的前提下，FD可以有多种不同的描述方法：
- 对于FD集合S和T而言，若关系实例集合满足S与其满足T的情况完全一样，就认为S和T等价
- 若满足T中所有FD的每个关系实例也满足S中的所有FD，则认为S是T中推断而来。


#### 分解/结合规则
分解：$A\rightarrow B,A\rightarrow C,A\rightarrow D $
结合：$A\rightarrow B,C,D$

#### 平凡函数依赖
$A_{1},A_{2},...,A_{n}\rightarrow B_{1},B_{2},...,B_{m}$，其中{$B_{1},B_{2},...,B_{m}$}$\subseteq${$A_{1},A_{2},...,A_{n}$}
title year$\rightarrow$title（自己函数决定自己）

#### 计算属性的闭包
R所有的函数依赖以及能推导出来的所有的函数依赖在一起的集合就是R的闭包。
FD：$AB\rightarrow C,BC\rightarrow AD,D\rightarrow E,CF\rightarrow B$那么{A,B}的闭包{A,B}$^{+} $是{A,B,C,D,E}
A,B决定C，{A,B,C}；B,C决定A,D {A,B,C,D};D决定E，{A,B,C,D,E}

C,F决定B，但F不被任何属性决定，所以不属于这个FD的闭包。


#### 传递规则
若关系R中FD$A_{1}A_{2}...A_{n}\rightarrow B_{1}B_{2}...B_{m}$和$B_{1}B_{2}...B_{m}\rightarrow C_{1}C_{2}...C_{k}$都成立，那么FD$A_{1}A_{2}...A_{n}\rightarrow C_{1}C_{2}...C_{k}$在R中也成立。

title year $\rightarrow$studioName

studioName $\rightarrow $studioAddr


根据传递规则，可以得出title year $


\rightarrow$studioAddr

#### 函数依赖的闭包集合


如果给定一个FD的集合S，则任何和S等价的FD集合都被称为S的**基本集**。

对于任意一个基本集，可以使用分解规则将FD的右边变成单一属性。

满足三个条件的基本集B被称为关系的**最小化基本集**

1. B中所有FD的右边均为单一属性。
2. 从B中删除任何一个FD后，该集合不再是基本集。
3. 对于B中的任何一个FD，如果从其左边删除一个或多个属性，B将不再是基本集。

最小化基本集中不可能包含平凡FD，因为可以根据规则2将其删除

**推理规则的完全集**

- 自反律：如果$ B_{1}B_{2}...B_{m} \subseteq A_{1}A_{2}...A_{n}$，则$A_{1}A_{2}...A_{n}\rightarrow B_{1}B_{2}...B_{m}$。

就是通常所说的**平凡FD**。

- 增广律：如果$A_{1}A_{2}...A_{n}\rightarrow B_{1}B_{2}...B_{m}$，那么$A_{1}A_{2}...A_{n}C_{1}C_{2}...C_{k}\rightarrow B_{1}B_{2}...B_{m}C_{1}C_{2}...C_{k}$
- 
